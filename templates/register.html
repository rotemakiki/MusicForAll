{% extends "base.html" %}

{% block title %}הרשמה - Music For All{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
{% endblock %}

{% block content %}
<div class="register-container">
    <!-- Left Panel - Branding -->
    <div class="register-brand-panel">
        <div class="brand-content">
            <div class="brand-logo">🎵</div>
            <h1 class="brand-title">הצטרף אלינו!</h1>
            <p class="brand-subtitle">התחל את המסע המוזיקלי שלך עם הפלטפורמה הטובה ביותר ללימוד מוזיקה בישראל</p>

            <div class="brand-steps">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">הירשם בחינם</div>
                        <div class="step-desc">תהליך פשוט ומהיר</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">בחר את התפקיד</div>
                        <div class="step-desc">מורה או תלמיד</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">התחל ללמוד</div>
                        <div class="step-desc">גש לתכנים מיד</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel - Register Form -->
    <div class="register-form-panel">
        <div class="form-header">
            <h2 class="form-title">יוצרים חשבון חדש</h2>
            <p class="form-subtitle">מלא את הפרטים שלך והתחל ללמוד מוזיקה היום</p>
        </div>

        <form method="post" action="" class="register-form">
            <!-- Personal Information -->
            <div class="form-group">
                <label for="username" class="form-label">
                    <span class="label-icon">👤</span>
                    <span>שם משתמש</span>
                </label>
                <div class="input-with-icon">
                    <input type="text" id="username" name="username" class="form-input" required
                           placeholder="הכנס את שם המשתמש שלך..." autocomplete="username">
                    <span class="input-icon">👤</span>
                </div>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">
                    <span class="label-icon">📧</span>
                    <span>כתובת אימייל</span>
                </label>
                <div class="input-with-icon">
                    <input type="email" id="email" name="email" class="form-input" required
                           placeholder="הכנס את כתובת האימייל שלך..." autocomplete="email">
                    <span class="input-icon">📧</span>
                </div>
            </div>

            <!-- Security -->
            <div class="form-group full-width">
                <label for="password" class="form-label">
                    <span class="label-icon">🔒</span>
                    <span>סיסמה</span>
                </label>
                <div class="input-with-icon">
                    <input type="password" id="password" name="password" class="form-input" required
                           placeholder="צור סיסמה חזקה..." autocomplete="new-password">
                    <span class="input-icon">🔒</span>
                </div>
                <!-- Password strength indicator will be added by JS -->
            </div>

            <!-- Role Selection -->
            <div class="form-group full-width">
                <label class="form-label">
                    <span class="label-icon">🎭</span>
                    <span>איך תרצה להשתמש בפלטפורמה?</span>
                </label>
                <div class="role-selection">
                    <label class="role-option">
                        <input type="radio" name="role" value="student" class="role-radio" required>
                        <div class="role-card">
                            <span class="role-icon">🎓</span>
                            <div class="role-title">תלמיד</div>
                            <div class="role-description">אני רוצה ללמוד מוזיקה ולשפר את הכישורים שלי</div>
                        </div>
                    </label>

                    <label class="role-option">
                        <input type="radio" name="role" value="teacher" class="role-radio" required>
                        <div class="role-card">
                            <span class="role-icon">👨‍🏫</span>
                            <div class="role-title">מורה</div>
                            <div class="role-description">אני רוצה ללמד מוזיקה ולשתף את הידע שלי</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn">
                <span>🚀</span>
                <span>הירשם עכשיו</span>
            </button>
        </form>

        <!-- Login Link -->
        <div class="login-link">
            <p>כבר יש לך חשבון?</p>
            <a href="{{ url_for('auth.login') }}" class="login-btn">
                <span>🔑</span>
                <span>התחבר כאן</span>
            </a>
        </div>

        <!-- Terms and Privacy (Optional) -->
        <div style="text-align: center; margin-top: 20px; font-size: 0.85rem; color: #64748b;">
            <p>על ידי הרשמה, אתה מסכים לתנאי השימוש ומדיניות הפרטיות שלנו</p>
        </div>

        <!-- Keyboard Shortcuts Info -->
        <div style="position: absolute; bottom: 15px; left: 15px; font-size: 0.75rem; color: #64748b; opacity: 0.7;">
            <div>קיצורי מקלדת:</div>
            <div>Alt+U: שם משתמש | Alt+E: אימייל | Alt+P: סיסמה</div>
            <div>Alt+1: תלמיד | Alt+2: מורה | Enter: הרשמה | Esc: ניקוי</div>
        </div>
    </div>
</div>

<!-- Screen reader only content for accessibility -->
<div class="sr-only">
    <h1>עמוד הרשמה למערכת Music For All</h1>
    <p>בעמוד זה תוכל ליצור חשבון חדש ולהתחיל ללמוד או ללמד מוזיקה</p>
</div>

<style>
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Additional step item styling */
.step-content {
    text-align: right;
}

.step-title {
    font-weight: 600;
    margin-bottom: 2px;
}

.step-desc {
    font-size: 0.85rem;
    opacity: 0.9;
}

/* Role card hover states */
.role-card {
    cursor: pointer;
    user-select: none;
}

.role-option:focus-within .role-card {
    outline: 2px solid #28a745;
    outline-offset: 2px;
}

/* Enhanced focus for accessibility */
.role-radio:focus + .role-card {
    border-color: #28a745;
    box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.2);
}

/* Success states for completed form sections */
.form-group.completed {
    position: relative;
}

.form-group.completed::after {
    content: '✅';
    position: absolute;
    top: 0;
    right: -25px;
    font-size: 1.2rem;
    animation: bounceIn 0.5s ease-out;
}

@keyframes bounceIn {
    from {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        transform: scale(1.05);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Mobile adjustments for role cards */
@media (max-width: 768px) {
    .step-item {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }

    .step-content {
        text-align: center;
    }

    .role-selection {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .role-card {
        padding: 20px 15px;
    }

    .role-icon {
        font-size: 2rem;
    }
}

/* Loading animation for submit button */
.submit-btn.loading {
    position: relative;
    color: transparent;
}

.submit-btn.loading::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top: 2px solid white;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: buttonSpin 1s linear infinite;
}

@keyframes buttonSpin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/register.js') }}"></script>
{% endblock %}
