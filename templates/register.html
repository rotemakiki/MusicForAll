{% extends "base.html" %}

{% block title %}×”×¨×©××” - Musica For All{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
{% endblock %}

{% block content %}
<div class="register-container">
    <!-- Left Panel - Branding -->
    <div class="register-brand-panel">
        <div class="brand-content">
            <div class="brand-logo">ğŸµ</div>
            <h1 class="brand-title">×”×¦×˜×¨×£ ××œ×™× ×•!</h1>
            <p class="brand-subtitle">×”×ª×—×œ ××ª ×”××¡×¢ ×”××•×–×™×§×œ×™ ×©×œ×š ×¢× ×”×¤×œ×˜×¤×•×¨××” ×”×˜×•×‘×” ×‘×™×•×ª×¨ ×œ×œ×™××•×“ ××•×–×™×§×” ×‘×™×©×¨××œ</p>

            <div class="brand-steps">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">×”×™×¨×©× ×‘×—×™× ×</div>
                        <div class="step-desc">×ª×”×œ×™×š ×¤×©×•×˜ ×•××”×™×¨</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">×‘×—×¨ ××ª ×”×ª×¤×§×™×“</div>
                        <div class="step-desc">××•×¨×”, ××•×¡×™×§××™ ××• ×ª×œ××™×“</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">×”×ª×—×œ ×œ×œ××•×“</div>
                        <div class="step-desc">×’×© ×œ×ª×›× ×™× ××™×“</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel - Register Form -->
    <div class="register-form-panel">
        <div class="form-header">
            <h2 class="form-title">×™×•×¦×¨×™× ×—×©×‘×•×Ÿ ×—×“×©</h2>
            <p class="form-subtitle">××œ× ××ª ×”×¤×¨×˜×™× ×©×œ×š ×•×”×ª×—×œ ×œ×œ××•×“ ××•×–×™×§×” ×”×™×•×</p>
        </div>

        <form method="post" action="" class="register-form">
            <!-- Personal Information -->
            <div class="form-group">
                <label for="username" class="form-label">
                    <span class="label-icon">ğŸ‘¤</span>
                    <span>×©× ××©×ª××©</span>
                </label>
                <div class="input-with-icon">
                    <input type="text" id="username" name="username" class="form-input" required
                           placeholder="×”×›× ×¡ ××ª ×©× ×”××©×ª××© ×©×œ×š..." autocomplete="username">
                    <span class="input-icon">ğŸ‘¤</span>
                </div>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">
                    <span class="label-icon">ğŸ“§</span>
                    <span>×›×ª×•×‘×ª ××™××™×™×œ</span>
                </label>
                <div class="input-with-icon">
                    <input type="email" id="email" name="email" class="form-input" required
                           placeholder="×”×›× ×¡ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š..." autocomplete="email">
                    <span class="input-icon">ğŸ“§</span>
                </div>
            </div>

            <!-- Security -->
            <div class="form-group full-width">
                <label for="password" class="form-label">
                    <span class="label-icon">ğŸ”’</span>
                    <span>×¡×™×¡××”</span>
                </label>
                <div class="input-with-icon">
                    <input type="password" id="password" name="password" class="form-input" required
                           placeholder="×¦×•×¨ ×¡×™×¡××” ×—×–×§×”..." autocomplete="new-password">
                    <span class="input-icon">ğŸ”’</span>
                </div>
                <!-- Password strength indicator will be added by JS -->
            </div>

            <!-- Role Selection -->
            <div class="form-group full-width">
                <label class="form-label">
                    <span class="label-icon">ğŸ­</span>
                    <span>××™×š ×ª×¨×¦×” ×œ×”×©×ª××© ×‘×¤×œ×˜×¤×•×¨××”?</span>
                </label>
                <div class="role-selection">
                    <label class="role-option">
                        <input type="radio" name="role" value="student" class="role-radio" required>
                        <div class="role-card">
                            <span class="role-icon">ğŸ“</span>
                            <div class="role-title">×ª×œ××™×“</div>
                            <div class="role-description">×× ×™ ×¨×•×¦×” ×œ×œ××•×“ ××•×–×™×§×” ×•×œ×©×¤×¨ ××ª ×”×›×™×©×•×¨×™× ×©×œ×™</div>
                        </div>
                    </label>

                    <label class="role-option">
                        <input type="radio" name="role" value="teacher" class="role-radio" required>
                        <div class="role-card">
                            <span class="role-icon">ğŸ‘¨â€ğŸ«</span>
                            <div class="role-title">××•×¨×”</div>
                            <div class="role-description">×× ×™ ×¨×•×¦×” ×œ×œ××“ ××•×–×™×§×”, ×œ×§×‘×œ ×ª×œ××™×“×™× ×•×œ×”××œ×™×¥</div>
                        </div>
                    </label>

                    <label class="role-option">
                        <input type="radio" name="role" value="musician" class="role-radio" required>
                        <div class="role-card">
                            <span class="role-icon">ğŸ¸</span>
                            <div class="role-title">××•×¡×™×§××™</div>
                            <div class="role-description">×× ×™ ×¨×•×¦×” ×œ×¤×¨×¡× ×©×™×¨×™× ×•×”×•×¤×¢×•×ª ×•×œ× ×”×œ ×¤×¨×•×¤×™×œ ×××Ÿ</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn">
                <span>ğŸš€</span>
                <span>×”×™×¨×©× ×¢×›×©×™×•</span>
            </button>
        </form>

        <!-- Login Link -->
        <div class="login-link">
            <p>×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ?</p>
            <a href="{{ url_for('auth.login') }}" class="login-btn">
                <span>ğŸ”‘</span>
                <span>×”×ª×—×‘×¨ ×›××Ÿ</span>
            </a>
        </div>

        <!-- Terms and Privacy (Optional) -->
        <div style="text-align: center; margin-top: 20px; font-size: 0.85rem; color: #64748b;">
            <p>×¢×œ ×™×“×™ ×”×¨×©××”, ××ª×” ××¡×›×™× ×œ×ª× ××™ ×”×©×™××•×© ×•××“×™× ×™×•×ª ×”×¤×¨×˜×™×•×ª ×©×œ× ×•</p>
        </div>

        <!-- Keyboard Shortcuts Info -->
        <div style="position: absolute; bottom: 15px; left: 15px; font-size: 0.75rem; color: #64748b; opacity: 0.7;">
            <div>×§×™×¦×•×¨×™ ××§×œ×“×ª:</div>
            <div>Alt+U: ×©× ××©×ª××© | Alt+E: ××™××™×™×œ | Alt+P: ×¡×™×¡××”</div>
            <div>Alt+1: ×ª×œ××™×“ | Alt+2: ××•×¨×” | Alt+3: ××•×¡×™×§××™ | Enter: ×”×¨×©××” | Esc: × ×™×§×•×™</div>
        </div>
    </div>
</div>

<!-- Screen reader only content for accessibility -->
<div class="sr-only">
    <h1>×¢××•×“ ×”×¨×©××” ×œ××¢×¨×›×ª Musica For All</h1>
    <p>×‘×¢××•×“ ×–×” ×ª×•×›×œ ×œ×™×¦×•×¨ ×—×©×‘×•×Ÿ ×—×“×© ×•×œ×”×ª×—×™×œ ×œ×œ××•×“ ××• ×œ×œ××“ ××•×–×™×§×”</p>
</div>

<style>
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Additional step item styling */
.step-content {
    text-align: right;
}

.step-title {
    font-weight: 600;
    margin-bottom: 2px;
}

.step-desc {
    font-size: 0.85rem;
    opacity: 0.9;
}

/* Role card hover states */
.role-card {
    cursor: pointer;
    user-select: none;
}

.role-option:focus-within .role-card {
    outline: 2px solid #28a745;
    outline-offset: 2px;
}

/* Enhanced focus for accessibility */
.role-radio:focus + .role-card {
    border-color: #28a745;
    box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.2);
}

/* Success states for completed form sections */
.form-group.completed {
    position: relative;
}

.form-group.completed::after {
    content: 'âœ…';
    position: absolute;
    top: 0;
    right: -25px;
    font-size: 1.2rem;
    animation: bounceIn 0.5s ease-out;
}

@keyframes bounceIn {
    from {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        transform: scale(1.05);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Mobile adjustments for role cards */
@media (max-width: 768px) {
    .step-item {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }

    .step-content {
        text-align: center;
    }

    .role-selection {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .role-card {
        padding: 20px 15px;
    }

    .role-icon {
        font-size: 2rem;
    }
}

/* Loading animation for submit button */
.submit-btn.loading {
    position: relative;
    color: transparent;
}

.submit-btn.loading::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top: 2px solid white;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: buttonSpin 1s linear infinite;
}

@keyframes buttonSpin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/register.js') }}"></script>
{% endblock %}
