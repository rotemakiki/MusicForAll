{% extends "base.html" %}

{% block title %}×¤×¨×•×¤×™×œ ×××Ÿ - {{ musician.username }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/teacher_profile.css') }}">
{% endblock %}

{% block content %}
<div class="teacher-profile-container">
    <div class="profile-header">
        <div class="profile-image-section">
            {% if musician.profile_image %}
                <img src="{{ musician.profile_image }}" alt="×ª××•× ×ª ×¤×¨×•×¤×™×œ" class="profile-image">
            {% else %}
                <div class="default-avatar">ğŸ¸</div>
            {% endif %}
            {% if session.get('user_id') == musician.id %}
            <form action="{{ url_for('general.upload_profile_image') }}" method="POST" enctype="multipart/form-data" class="upload-form">
                <div class="file-input-wrapper">
                    <input type="file" name="profile_image" id="profile-image-input" class="file-input" accept="image/*" required>
                    <label for="profile-image-input" class="file-input-label">
                        <span>ğŸ“·</span>
                        <span>×‘×—×¨ ×ª××•× ×”</span>
                    </label>
                </div>
                <input type="hidden" name="user_id" value="{{ musician.id }}">
                <button type="submit" class="action-btn secondary">
                    <span>â¬†ï¸</span>
                    <span>×”×¢×œ×” ×ª××•× ×ª ×¤×¨×•×¤×™×œ</span>
                </button>
            </form>
            {% endif %}
        </div>

        <h1 class="teacher-name">{{ musician.username }}</h1>
        <p class="form-subtitle" style="margin-top: 0.5rem;">×¤×¨×•×¤×™×œ ×××Ÿ</p>

        <div class="teacher-details">
            <div class="detail-card">
                <div class="detail-header">
                    <span>ğŸ“…</span>
                    <span>×•×ª×§ ×‘××ª×¨</span>
                </div>
                <div class="detail-value">{{ days_on_site }} ×™××™×</div>
            </div>
            <div class="detail-card">
                <div class="detail-header">
                    <span>ğŸµ</span>
                    <span>×©×™×¨×™×</span>
                </div>
                <div class="detail-value">{{ songs|length }}</div>
            </div>
        </div>

        {% if session.get('user_id') == musician.id %}
        <div class="action-buttons">
            <a href="{{ url_for('songs.add_song_page') }}" class="action-btn">
                <span>â•</span>
                <span>×”×•×¡×£ ×©×™×¨</span>
            </a>
        </div>
        {% endif %}
    </div>

    <div class="content-section">
        <h2 class="section-header">
            <span>ğŸµ</span>
            <span>×”×©×™×¨×™× ×©×œ×™</span>
        </h2>

        {% if songs %}
        <div class="videos-grid">
            {% for song in songs %}
            <div class="video-card">
                <div class="video-info">
                    <h3 class="video-title">{{ song.title }}</h3>
                    <p class="video-description">{{ song.artist }}{% if song.get('display_genres') %} Â· {{ song.display_genres | join(', ') }}{% endif %}</p>
                    <div class="video-actions">
                        <a href="{{ url_for('songs.play_song', song_id=song.id) }}" class="video-btn">
                            <span>â–¶ï¸</span>
                            <span>×œ×¢××•×“ ×”×©×™×¨</span>
                        </a>
                        {% if session.get('user_id') == musician.id %}
                        <a href="{{ url_for('songs.edit_song', song_id=song.id) }}" class="video-btn">
                            <span>âœï¸</span>
                            <span>×¢×¨×•×š</span>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">ğŸµ</div>
            <h3>××™×Ÿ ×©×™×¨×™× ×œ×”×¦×’×”</h3>
            <p>×¢×“×™×™×Ÿ ×œ× × ×•×¡×¤×• ×©×™×¨×™× ×œ×¤×¨×•×¤×™×œ</p>
            {% if session.get('user_id') == musician.id %}
            <a href="{{ url_for('songs.add_song_page') }}" class="action-btn">×”×•×¡×£ ×©×™×¨ ×¨××©×•×Ÿ</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
