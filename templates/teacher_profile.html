{% extends "base.html" %}

{% block title %}פרופיל מורה - {{ teacher.username }}{% endblock %}

{% block content %}
<div class="container">

    {% if teacher.profile_image %}
        <img src="{{ teacher.profile_image }}" alt="תמונת פרופיל" style="width: 150px; border-radius: 50%; margin-bottom: 20px;">
    {% endif %}

    <form action="{{ url_for('routes.upload_profile_image') }}" method="POST" enctype="multipart/form-data" style="margin-bottom: 20px;">
        <input type="file" name="profile_image" accept="image/*" required style="margin-bottom: 10px;">
        <input type="hidden" name="user_id" value="{{ teacher.id }}">
        <button type="submit" class="btn">⬆️ העלה תמונת פרופיל</button>
    </form>


    <h1>{{ teacher.username }}</h1>
    <p><strong>כלי נגינה:</strong> {{ teacher.instruments or "לא צויין" }}</p>
    <p><strong>סגנונות לימוד:</strong> {{ teacher.styles or "לא צויין" }}</p>

    <p><strong>פנוי לקבלת תלמידים:</strong>
        {% if teacher.is_available %}
            <span style="color: green; font-weight: bold;">כן</span>
        {% else %}
            <span style="color: red; font-weight: bold;">לא</span>
        {% endif %}
    </p>
    <p><strong>מלמד דרך זום:</strong>
    {% if teacher.teaches_online %}
        <span style="color: green; font-weight: bold;">כן</span>
    {% else %}
        <span style="color: red; font-weight: bold;">לא</span>
    {% endif %}
    </p>

    <p><strong>ותק באתר:</strong> {{ days_on_site }} ימים</p>

    <a href="#" class="btn">צור קשר עם המורה (בקרוב)</a>
    <a href="{{ url_for('routes.edit_teacher_profile', teacher_id=teacher.id) }}" class="btn">✏️ ערוך פרופיל</a>

    <hr>
    <h3>📤 העלאת סרטון חדש</h3>
    <form action="{{ url_for('routes.upload_video') }}" method="POST" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="כותרת הסרטון" required>
        <input type="text" name="description" placeholder="תיאור קצר" required>
        <input type="file" name="video_file" accept="video/*" required>
        <input type="hidden" name="teacher_id" value="{{ teacher.id }}">
        <button type="submit" class="btn">⬆️ העלה סרטון</button>
    </form>

    <hr>
    <h3>🎬 סרטונים פופולריים</h3>
    {% if videos %}
            {% for video in videos %}
                <div style="margin-bottom: 30px;">
                    <h4>{{ video.title }}</h4>
                    <p>{{ video.description }}</p>
                    <video width="400" controls>
                        <source src="{{ video.url }}" type="video/mp4">
                        הדפדפן שלך לא תומך בניגון וידאו.
                    </video>
                </div>
            {% endfor %}

        <a href="{{ url_for('routes.videos') }}" class="btn">צפייה בכל הסרטונים</a>
    {% else %}
        <p>אין סרטונים להצגה.</p>
    {% endif %}

    <hr>
    <h3>💬 המלצות תלמידים</h3>
    <ul>
        <li>מורה הכי תותח!</li>
        <li>מסביר בצורה סבלנית וברורה</li>
        <li>נהניתי מכל רגע, ממליץ בחום!</li>
    </ul>
</div>
{% endblock %}
