<!-- Enhanced Chord Selector Sidebar with Advanced Chords Support -->
<div class="chord-sidebar">
    <h3>🎸 בחר אקורד</h3>

    <div class="sidebar-content">
        <!-- Root Note Selection -->
        <div class="section">
            <h4>בחר תו יסוד:</h4>
            <div id="root-letters" class="button-grid">
                <!-- יטען דינמית על ידי chord_ui.js -->
            </div>
        </div>

        <!-- Accidental Buttons -->
        <div class="section">
            <h4>בחר סימן:</h4>
            <div id="accidental-buttons" class="accidental-buttons">
                <!-- יטען דינמית על ידי chord_ui.js -->
            </div>
        </div>

        <!-- Chord Type Selection - Categories -->
        <div class="section">
            <h4>בחר סוג אקורד:</h4>

            <!-- אקורדים משולשים (3 תווים) -->
            <div class="chord-category">
                <h5 class="category-title">אקורדים משולשים (3 תווים):</h5>
                <div id="triads-chord-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>

            <!-- אקורדים מרובעים (4 תווים) -->
            <div class="chord-category">
                <h5 class="category-title">אקורדים מרובעים (4 תווים):</h5>
                <div id="seventh-chord-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>

            <!-- אקורדים מחומשים (5+ תווים) -->
            <div class="chord-category">
                <h5 class="category-title">אקורדים מחומשים (5+ תווים):</h5>
                <div id="extended-chord-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>
        </div>

        <!-- Advanced Chords Toggle Section -->
        <div class="section">
            <h4>אקורדים מתקדמים:</h4>

            <!-- כפתורי הפעלת מצבים מתקדמים -->
            <div class="advanced-toggle-row">
                <button id="slash-mode-toggle" class="advanced-toggle-btn" type="button">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span>🎸</span>
                        <span>אקורדי סלאש</span>
                    </div>
                    <span class="toggle-arrow">▶</span>
                </button>

                <button id="extended-mode-toggle" class="advanced-toggle-btn" type="button">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span>🎵</span>
                        <span>אקורדים מורחבים</span>
                    </div>
                    <span class="toggle-arrow">▶</span>
                </button>
            </div>
        </div>

        <!-- Slash Chords Panel (מוסתר בהתחלה) -->
        <div id="slash-chords-panel" class="advanced-panel" style="display: none;">
            <div class="panel-header">
                <h4>בחר תו בס לאקורד:</h4>
                <button id="close-slash-panel" class="close-panel-btn">✕</button>
            </div>
            <div id="bass-notes-grid" class="button-grid">
                <!-- יטען דינמית על ידי chord_ui.js -->
            </div>
            <div class="slash-preview">
                <strong>תוצאה:</strong>
                <span id="slash-chord-preview">—</span>
            </div>
        </div>

        <!-- Extended Chords Panel (מוסתר בהתחלה) -->
        <div id="extended-chords-panel" class="advanced-panel" style="display: none;">
            <div class="panel-header">
                <h4>אקורדים מתקדמים:</h4>
                <button id="close-extended-panel" class="close-panel-btn">✕</button>
            </div>

            <!-- אקורדים עם הרחבות -->
            <div class="chord-category">
                <h5 class="category-title">הרחבות (9, 11, 13):</h5>
                <div id="extended-ninth-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>

            <!-- אקורדים עם שינויים -->
            <div class="chord-category">
                <h5 class="category-title">אקורדים משובשים:</h5>
                <div id="altered-chord-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>

            <!-- אקורדים מיוחדים -->
            <div class="chord-category">
                <h5 class="category-title">אקורדים מיוחדים:</h5>
                <div id="special-chord-types" class="chord-types-grid">
                    <!-- יטען דינמית על ידי chord_ui.js -->
                </div>
            </div>
        </div>

        <!-- Current Selection Display -->
        <div class="current-selection">
            <strong>אקורד נבחר:</strong>
            <div id="current-chord-display">—</div>
        </div>

        <!-- Add Chord Button -->
        <button class="add-chord-btn" disabled>
            ➕ הוסף אקורד
        </button>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="btn small-btn secondary-btn" id="clear-measure-btn" disabled>
                🗑️ נקה
            </button>
            <button class="btn small-btn secondary-btn" id="add-empty-chord-btn" disabled>
                🔇 ריק
            </button>
        </div>

        <!-- Recently Used Chords Section -->
        <div class="section recently-used-section">
            <h4>אקורדים שנוספו לאחרונה:</h4>
            <div id="recently-used-chords" class="recently-used-chords">
                <!-- יטען דינמית על ידי chord_ui.js -->
            </div>
        </div>

        <!-- App Status Section (for debugging) -->
        <div class="section" style="margin-top: auto; padding-top: 10px; border-top: 1px solid #e1e8ed;">
            <div id="app-status" style="font-size: 10px; color: #666; text-align: center;">
                טוען...
            </div>
        </div>
    </div>
</div>

<script>
// עדכון סטטוס האפליקציה
function updateAppStatus() {
    const statusEl = document.getElementById('app-status');
    if (statusEl && window.chordApp) {
        const status = window.chordApp.getAppStatus();
        const isOnline = navigator.onLine ? '🟢' : '🔴';
        const hasChanges = status.hasUnsavedChanges ? '📝' : '✅';
        statusEl.textContent = `${isOnline} ${hasChanges} ${status.mode || 'טוען'}`;
        statusEl.title = `מחובר: ${navigator.onLine ? 'כן' : 'לא'}, שינויים: ${status.hasUnsavedChanges ? 'יש' : 'אין'}`;
    }
}

// עדכון כל 5 שניות
setInterval(updateAppStatus, 5000);
document.addEventListener('DOMContentLoaded', updateAppStatus);
</script>
